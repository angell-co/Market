{% set value = '' %}
{% if element %}{% set value = element.getFieldValue(field.handle) %}{% endif %}
{% js "https://cdn.ckeditor.com/ckeditor5/25.0.0/classic/ckeditor.js" %}

{% js %}
    ClassicEditor
        .create(document.querySelector('#field-{{ field.id }}'), {
            toolbar: [ 'heading', '|', 'bold', 'italic', 'link', 'bulletedList', 'numberedList', 'blockQuote' ],
        })
        .then(editor => {
            // https://stackoverflow.com/a/45145797/1688568
            editor.model.document.on('change:data', () => {
                editor.updateSourceElement();
            });
        })
        .catch(error => {
            console.error(error);
        });
{% endjs %}

{# TODO - sort buttons / options and format the internal text #}

<div>
    <label for="field-{{ field.id }}" class="block text-sm font-medium text-gray-700">
        {{ field.name }}
        {% if field.required %}<span class="text-red-600">*</span>{% endif %}
    </label>

    {% if field.instructions %}
        <p class="text-xs text-gray-500">{{ field.instructions|md(inlineOnly = true) }}</p>
    {% endif %}

    <div class="mt-2">
        <textarea id="field-{{ field.id }}" name="fields[{{ field.handle }}]">
            {{ value|e }}
        </textarea>
    </div>
</div>
