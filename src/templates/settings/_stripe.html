{% extends 'market/settings/_layout' %}

{% import '_includes/forms' as forms %}

{% set fullPageForm = true %}

{% set selectedNavItem = 'stripe' %}

{# TODO: multi-site #}

{% block content %}

    {{ actionInput('market/settings/save-stripe') }}
    {{ redirectInput('market/settings/stripe') }}

    {% if settings.id %}
        {{ hiddenInput('settingsId', settings.id) }}
    {% endif %}

    {{ forms.textField({
        first: true,
        label: 'Client ID'|t('market'),
        instructions: 'A unique identifier for your platform, generated by Stripe. This can be found from your {platform_settings_link}.'|t('market', params = {platform_settings_link: '<a href="https://dashboard.stripe.com/account/applications/settings" target="_blank">platform settings</a>'}),
        id: 'clientId',
        name: 'clientId',
        value: settings.clientId,
        errors: settings.getErrors('clientId'),
        required: true
    }) }}

    {{ forms.textField({
        label: 'Secret Key'|t('market'),
        instructions: 'This can be found in your {api_settings_link}.'|t('market', params = {api_settings_link: '<a href="https://dashboard.stripe.com/account/apikeys" target="_blank">API settings</a>'}),
        id: 'secretKey',
        name: 'secretKey',
        value: settings.secretKey,
        errors: settings.getErrors('secretKey'),
        required: true
    }) }}

    {{ forms.textField({
        label: 'Publishable Key'|t('market'),
        instructions: 'This can be found in your {api_settings_link}.'|t('market', params = {api_settings_link: '<a href="https://dashboard.stripe.com/account/apikeys" target="_blank">API settings</a>'}),
        id: 'publishableKey',
        name: 'publishableKey',
        value: settings.publishableKey,
        errors: settings.getErrors('publishableKey'),
        required: true
    }) }}

    {{ forms.textField({
        label: 'Redirect URI (success)'|t('market'),
        instructions: 'A URI to redirect to when a user has successfully connected to Stripe via OAuth.'|t('market'),
        id: 'redirectSuccess',
        name: 'redirectSuccess',
        value: settings.redirectSuccess,
        errors: settings.getErrors('redirectSuccess'),
        required: true
    }) }}

    {{ forms.textField({
        label: 'Redirect URI (error)'|t('market'),
        instructions: 'A URI to redirect to when there was a problem connecting to Stripe via OAuth.'|t('market'),
        id: 'redirectError',
        name: 'redirectError',
        value: settings.redirectError,
        errors: settings.getErrors('redirectError'),
        required: true
    }) }}

{% endblock %}
